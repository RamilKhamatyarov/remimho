plugins {
    id("application")
    id("io.spring.dependency-management") version "1.1.4"
    id("org.jetbrains.kotlin.jvm") version "2.1.10"
    id("org.jetbrains.kotlin.plugin.spring") version "2.1.10"
    id("org.openjfx.javafxplugin") version "0.0.14"
    id("org.springframework.boot") version "3.2.3"

}

group = "ru.rkhamatyarov"
version = "1.0-SNAPSHOT"

javafx {
    version = "23"
    modules("javafx.controls", "javafx.fxml")
}

repositories {
    mavenCentral()
}

dependencies {
    implementation("org.jetbrains.kotlin:kotlin-stdlib")

    // javafx
    implementation("org.openjfx:javafx-controls:23")
    implementation("org.openjfx:javafx-fxml:23")

    // spring boot
    implementation("org.springframework.boot:spring-boot-starter")

    testImplementation("org.springframework.boot:spring-boot-starter-test")
    testImplementation("org.testfx:testfx-junit5:4.0.16-alpha")
    testImplementation("io.mockk:mockk:1.13.17")
}

tasks.test {
    useJUnitPlatform()
    jvmArgs = [
            '--add-opens=javafx.graphics/javafx.stage=ALL-UNNAMED',
            '--add-opens=javafx.graphics/javafx.scene=ALL-UNNAMED'
    ]
}

application {
    mainClass.set("ru.rkhamatyarov.WhiteboardApplication")
}
