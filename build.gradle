plugins {
    id("application")
    id("io.spring.dependency-management") version "1.1.7"
    id("org.jetbrains.kotlin.jvm") version "2.1.21"
    id("org.jetbrains.kotlin.plugin.spring") version "2.1.21"
    id("org.openjfx.javafxplugin") version "0.1.0"
    id("org.springframework.boot") version "3.5.0"

}

group = "ru.rkhamatyarov"
version = "1.0-SNAPSHOT"

javafx {
    version = "23"
    modules("javafx.controls", "javafx.fxml")
}

repositories {
    mavenCentral()
}

dependencies {
    implementation("org.jetbrains.kotlin:kotlin-stdlib")

    implementation("org.openjfx:javafx-controls:24.0.1")
    implementation("org.openjfx:javafx-fxml:24.0.1")

    implementation("org.springframework.boot:spring-boot-starter")

    testImplementation("org.springframework.boot:spring-boot-starter-test")
    testImplementation("org.testfx:testfx-junit5:4.0.18")
    testImplementation("io.mockk:mockk:1.14.2")
}

tasks.test {
    useJUnitPlatform()
    jvmArgs = [
            '--add-opens=javafx.graphics/javafx.stage=ALL-UNNAMED',
            '--add-opens=javafx.graphics/javafx.scene=ALL-UNNAMED'
    ]
}

application {
    mainClass.set("ru.rkhamatyarov.WhiteboardApplication")
}
